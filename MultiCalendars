// â”€â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const calendars = [
  { id: 'aaa@group.calendar.google.com', name: 'A-Level' },
  { id: 'bbb@group.calendar.google.com', name: 'à¸„à¸­à¸£à¹Œà¸ª à¸¡.1' },
  { id: 'ccc@group.calendar.google.com', name: 'à¸„à¸­à¸£à¹Œà¸ª à¸¡.4' },
  { id: 'ddd@group.calendar.google.com', name: 'à¸„à¸­à¸£à¹Œà¸ª à¸¡.5' },
  { id: 'eee@group.calendar.google.com', name: 'à¸„à¸­à¸£à¹Œà¸ª à¸¡.6' },
  // â€¦add more
];

var telegramToken = "xxx";  // Telegram bot token
var chatId = "xxx";  // Telegram chat ID

// â”€â”€â”€ CONFIG END â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function dailyEventMessage() {
  const now = new Date(), tz = Session.getScriptTimeZone();
  const fmtD = d => d.toLocaleDateString('th-TH', { day:'numeric', month:'long', year:'numeric' });
  const fmtT = dt => Utilities.formatDate(dt, tz, 'HH:mm');

  const text = calendars.map(c => {
    const evs = CalendarApp.getCalendarById(c.id).getEventsForDay(now);
    const header = `ğŸ“£ à¸›à¸à¸´à¸—à¸´à¸™: *${c.name}*`;
    const info = evs.length
      ? `à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ ${fmtD(now)} \n  ğŸ”¶ à¸¡à¸µà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” ${evs.length} à¸à¸´à¸ˆà¸à¸£à¸£à¸¡`
      : `à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£ ${fmtD(now)}`;
    const details = evs.map((e, i) =>
      `${i+1}. ğŸ“ ${e.getTitle()}
   â° ${fmtT(e.getStartTime())}-${fmtT(e.getEndTime())}
   ğŸ“ ${e.getDescription()||'-'}`
    ).join('\n');
    return [header, info, details].filter(Boolean).join('\n');
  }).join('\n\n');

  UrlFetchApp.fetch(
    `https://api.telegram.org/bot${telegramToken}/sendMessage`,
    {
      method: 'post',
      contentType: 'application/json',
      payload: JSON.stringify({
        chat_id: chatId,
        text,
        parse_mode: 'Markdown'
      })
    }
  );
}
